# Базы данных

## Бизнес-логика

Приложение для ресторана с возможностью формирования заказов и детального просмотра меню. Зарегистрированные пользователи могут получать накопительную скидку, формировать списки заказов и делиться ими, а также добавлять позиции в избранное. Должна быть возможность быстро составлять кастомные наборы/акции по заданным критериям (выбрать позиции по классам/характеристикам).

## Данные

Несколько слов о конкретных структурах данных: 

* **Пользователи**: зарегистрированные пользователи, для каждого хотим иметь возможность получать и изменять список заказов и избранные блюда. 
* **Позиции**: всевозможные позиции в меню ресторана, для каждого должна быть указана цена, список продуктов произвольной длины, теги и, возможно, дополнительные характеристики. Редкие изменения, частое чтение.
* **Списки**: произвольные списки/наборы/акции, связанные как с пользователями, так и с позициями в меню. Частые изменения и чтение.

## Базы данных

В качестве кандидатов будем рассматривать три СУБД: PostgreSQL, Cassandra и Google FireBase.

### PostgreSQL 

#### *Плюсы*
* Одна из самых популярных и продвинутых SQL-бд.
* Не создавалась как распределенная, но есть поддержка.
* Направлена на работу с большими объёмами данных, хорошо расширяема.
* Поддерживает кастомные типы данных через `JSON`.

#### *Минусы*
* В целом медленнее популярных аналогов на SQL.
* Тяжело контролировать состояние ДБ и заниматься дебаггингом.
* Требует выделенный сервер.
* Поддерживает только Master-Slave репликацию.

### Cassandra

#### *Плюсы*
* Высокая стабильность и защита от потери данных.
* Хорошая расширяемость.
* Высокая скорость записи.
* Хранение данных в столбцах.

#### *Минусы*
* Требовательность к ресурсам.
* Медленное чтение.

### Google FireBase

#### *Плюсы*
* Экосистема.
* Хранение данных в формате `JSON`.
* Дублирование данных для ускорения работы.
* Хранение данных в облаке, сервер не нужен. 

#### *Минусы*
* Ограниченный функционал запросов (простые `read/write`).
* Тяжело перейти на другие аналоги.
* Android-ориентированность.

## Итог

Из вышеперечисленных БД наиболее подходящей выглядит PostgreSQL: в проекте наверняка потребуется сложная логика запросов, из-за чего FireBase сильно проигрывает (а её обширная экосистема скорее избыточна). Cassandra больше подходит для крупных проектов, а хранение данных не принесёт большой пользы. Медлительность PostgreSQL не критична: для получения данных (например, отображения всех позиций меню) она отработает достаточно быстро, а остальные операции менее требовательны к производительности. Классический SQL с таблицами и отношениями тоже скорее плюс, так как позволит более понятно организовать данные с зависимостями.